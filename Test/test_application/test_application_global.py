import unittest

from App.Application import Application
from App.communities_finder.CommunityCenter import CommunityCenter
from App.graph_builder.GraphBuilder import GraphBuilder
from App.tokenizer.TokenWizard import TokenWizard


class TestApplicationGlobal(unittest.TestCase):

    def helper_init_app_object(self):
        with open('C:/Users/HP2_STAT/Desktop/Git Projet/pudding/Test/test_application/test_resources/syntagms',
                  encoding="utf-8") as f:
            syntagms = f.readlines()
        tw = TokenWizard(syntagms, ["pomme de terre", "pommes de terre"], "fr_core_news_md")
        gb = GraphBuilder(tw.enchance_tokens())
        cc = CommunityCenter(gb.get_complete_graph())
        app = Application(tw, gb, cc)
        return app

    def test_global_application(self):
        output = self.helper_init_app_object().run()
        expected = [["J'",
                     "j'",
                     'Je',
                     'je',
                     'me',
                     'je',
                     "J'",
                     'je',
                     "J'",
                     'je',
                     'me',
                     'j‚Äô',
                     'je',
                     'je',
                     'je',
                     'je',
                     "j'",
                     'je',
                     'je',
                     'me',
                     'Je',
                     'je',
                     'j‚Äô',
                     'je',
                     'je',
                     "j'",
                     'je',
                     'me',
                     'j‚Äô',
                     'mon',
                     'je',
                     'moi',
                     "j'",
                     'je',
                     "j'",
                     'je',
                     'me',
                     'Je',
                     'je',
                     'Je'],
                    ['chaque'],
                    ['queue'],
                    ['voulu',
                     'pour',
                     'pour',
                     'pour',
                     'veux',
                     'dois',
                     'pour',
                     'voulu',
                     'pour',
                     'pouvais',
                     'pour',
                     'pour',
                     'devais',
                     'pour',
                     'pu',
                     'pour',
                     'demande',
                     'demande',
                     'doit',
                     'fini',
                     'entend',
                     'songez',
                     'aimez',
                     'tiens',
                     'pour',
                     'cens√©',
                     'avant',
                     'avant',
                     'fini',
                     'pour',
                     'allez',
                     'souhaitant',
                     'pour',
                     'essaie',
                     'tiens',
                     'd√©conseille'],
                    ['une',
                     'la',
                     'la',
                     'la',
                     'cette',
                     'une',
                     'la',
                     'une',
                     'une',
                     'la',
                     'la',
                     'Une',
                     'grande',
                     'sa'],
                    ['fois', 'fois'],
                    ['form√©'],
                    ['des',
                     'des',
                     'les',
                     'les',
                     'les',
                     'leurs',
                     'des',
                     'plusieurs',
                     'les',
                     'les',
                     'des',
                     'deux',
                     'deux',
                     'certains',
                     'ces',
                     'des',
                     'les',
                     'Les',
                     'des',
                     'les',
                     'les'],
                    ['achats', 'achats', 'achats'],
                    ['en', 'en', 'en', 'En', 'en', 'en', 'en', 'en', 'en', 'en', 'en', 'en'],
                    ['dehors', 'Dans', 'dans'],
                    ['de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de',
                     'de'],
                    ["l'", "l'", "d'", "l'", "d'", "d'", 'l‚Äô', 'l‚Äô', 'l‚Äô', 'l‚Äô'],
                    ['√©picerie', 'magasin', 'magasin', 'magasin'],
                    [',',
                     ',',
                     'et',
                     'et',
                     ',',
                     'malgr√©',
                     ',',
                     ',',
                     ',',
                     ',',
                     '.',
                     ',',
                     ',',
                     '.',
                     ',',
                     '.',
                     ',',
                     ',',
                     '.',
                     ',',
                     ',',
                     ',',
                     '.',
                     ',',
                     ',',
                     '.',
                     ',',
                     ',',
                     ',',
                     ',',
                     ',',
                     'comme',
                     ',',
                     ',',
                     '.',
                     ',',
                     'et',
                     ',',
                     ',',
                     '.',
                     ',',
                     ',',
                     'et',
                     ',',
                     '.',
                     'Cependant',
                     ',',
                     'et',
                     ',',
                     'et',
                     '.',
                     ',',
                     '.',
                     'et',
                     'et',
                     'comme',
                     'et',
                     '.',
                     'et',
                     ',',
                     'et',
                     '.',
                     ',',
                     'et',
                     ',',
                     ',',
                     '.',
                     ',',
                     '.',
                     '.'],
                    ['du',
                     'un',
                     'du',
                     'le',
                     'un',
                     'le',
                     'le',
                     'le',
                     'ce',
                     'au',
                     'du',
                     'le',
                     'le',
                     'le',
                     'ce',
                     'du',
                     'le',
                     'un',
                     'Le',
                     'le',
                     'le',
                     'un',
                     'un',
                     'le',
                     'ce',
                     'du',
                     'le',
                     'ce',
                     'le'],
                    ['rez-de-chauss√©e'],
                    ['coll√®gue'],
                    ['samedi', 'matin', '15h', 'matin', '20h', 'dimanche', '19h20', 'hier'],
                    ['...', '!', '!', '!', '!', '!'],
                    ['\n ',
                     '\n ',
                     '\n ',
                     '\n ',
                     '\n ',
                     '\n ',
                     '\n ',
                     '\n ',
                     '\n ',
                     '\n ',
                     '\n ',
                     '\n '],
                    ['section',
                     'pr√©sence',
                     'exp√©rience',
                     'fonctionnelle',
                     's√©curit√©',
                     'professionnel',
                     'r√©orientation',
                     'r√©approvisionnement',
                     'qualit√©',
                     'march√©',
                     'explications',
                     'r√©flexion',
                     '√©galement',
                     'personnel',
                     'client',
                     'proc√©d√©s',
                     'client',
                     'prioritaire'],
                    ['emballage', 'produit'],
                    ['carte'],
                    ['perdu', 'quitt√©', 'perdu', 'vol√©', 'vol√©'],
                    ['temps', 'temps', 'temps', 'temps'],
                    ['√†', '√†', '√†', '√†', '√†', '√†', '√†'],
                    ['retours'],
                    ['prix', 'prix'],
                    ['car',
                     'tout',
                     'ne',
                     'pas',
                     'que',
                     'trop',
                     'comment',
                     'ailleurs',
                     'sentiment',
                     'que',
                     'aucun',
                     'probl√®me',
                     'rien',
                     'ne',
                     'plus',
                     'pr√©cipitamment',
                     'ne',
                     'pas',
                     'presque',
                     'mais',
                     "aujourd'hui",
                     'tr√®s',
                     'mauvaise',
                     'Si',
                     'aucune',
                     'car',
                     'seulement',
                     'si',
                     'que',
                     'tout',
                     'plus',
                     'qui',
                     'aussi',
                     'pas',
                     'tout',
                     'si',
                     'pas',
                     'souvent',
                     'surtout',
                     'assez',
                     'sachant',
                     'que',
                     'si',
                     'pas',
                     'que',
                     'tout',
                     'm√™me',
                     'bonne',
                     'surtout',
                     'super',
                     'd√©j√†',
                     'disant',
                     'plus',
                     'peu',
                     'plus',
                     'tr√®s',
                     'ne',
                     'pas',
                     'qui',
                     'qui',
                     'tr√®s',
                     'quoi',
                     'alors',
                     'que',
                     'm√™me',
                     'pas',
                     'toujours',
                     'pas',
                     'd√©j√†',
                     'entendant',
                     'que',
                     'ne',
                     'm√™me',
                     'pas',
                     'rendant',
                     "qu'",
                     'mais',
                     'tr√®s',
                     'tout',
                     'extr√™mement',
                     'brusqu√©',
                     'ne',
                     'm√™me',
                     'pas',
                     "lorsqu'",
                     'que',
                     'rien',
                     'Inadmissible',
                     'ne',
                     'm√™me',
                     'pas',
                     'que',
                     'd√©sagr√©able',
                     'quand',
                     'car',
                     'que',
                     'surtout',
                     'que'],
                    ['code', 'codes'],
                    ['sur', 'sur'],
                    ['articles', 'articles', 'articles'],
                    ['ai',
                     'ai',
                     'sont',
                     'a',
                     '√™tre',
                     'a',
                     'avoir',
                     'a',
                     'ai',
                     'suis',
                     'avoir',
                     'ai',
                     'avoir',
                     'aurais',
                     'aurais',
                     'suis',
                     '√©tais',
                     'ai',
                     'a',
                     'a',
                     'sommes',
                     'a',
                     'ai',
                     'avoir',
                     'a',
                     'a',
                     'aurait',
                     'avais',
                     'suis',
                     'avaient',
                     'etaient',
                     'avais',
                     'trompaient',
                     'a',
                     'avaient',
                     'sont',
                     '√©taient',
                     'ont',
                     'constataient',
                     'avions',
                     'a',
                     'suis'],
                    ['affich√©s'],
                    ['panneaux'],
                    ['Puis'],
                    ['passage', 'remontant'],
                    ['caisse', 'caisses', 'caisse', 'caisse', 'caisse', 'caisse', 'caisse'],
                    ['ü§¶', '\u200d', '‚ôÇ', 'Ô∏è.'],
                    ['ch√®que'],
                    ['cadeau'],
                    ['malpolis'],
                    ["n'", 'n‚Äô', 'n‚Äô', 'n‚Äô', "n'"],
                    ['y', 'y', 'y'],
                    ['auto'],
                    ['soit'],
                    ['b√™te'],
                    ["C'", "c'"],
                    ['est', 'fut', 'est', 'est', 'est', 'est', 'est', 'est', 'est'],
                    ['vigile', 'vigile', 'vigile', 'vigile'],
                    ['Apr√®s'],
                    ['minutes'],
                    ['(', ')'],
                    ['avec', 'avec', 'avec', 'avec'],
                    ['h√¥tesse', 'H√¥tesse'],
                    ['reproche'],
                    ['cel√†'],
                    ['Par'],
                    ['contre'],
                    ['mit'],
                    ['remis'],
                    ['mains'],
                    ['votre', 'vous'],
                    ['tach√©'],
                    ['marge'],
                    ['mes', 'mes', 'mes'],
                    ['100e'],
                    ['gare'],
                    ['bref'],
                    ['monde'],
                    ['0'],
                    ['√©toile'],
                    ['venue'],
                    ['courses'],
                    ['prenant', 'prend', 'prend'],
                    ['esp√®ce', 'esp√®ce', 'esp√®ce'],
                    ['genre'],
                    ['celui'],
                    ['ci'],
                    ['m‚Äô', 'm‚Äô'],
                    ['faire',
                     'faire',
                     'allers',
                     'conna√Ætre',
                     'trouver',
                     'utiliser',
                     'trouver',
                     'utiliser',
                     'transmettre',
                     'attendu',
                     'passer',
                     'attendre',
                     'navr√©',
                     'd√©sol√©',
                     'faire',
                     'pr√©cipiter',
                     'arriver',
                     'mettre',
                     'fait',
                     'faire',
                     'fais',
                     'ignore',
                     'r√©gler',
                     'r√©pond',
                     'poser',
                     'occuper',
                     'r√©gler',
                     'ignore',
                     'd√©pend',
                     'souligner',
                     'comprend',
                     'sais',
                     'parler',
                     'fait',
                     'voler',
                     'excuser',
                     'excusant',
                     'fouiller',
                     'sortir',
                     'sortir',
                     'comprends',
                     'parler',
                     'fait',
                     'ignorer',
                     'discute',
                     'rappeler',
                     'payer'],
                    ['il', 'lui', 'il', 'il', 'on', 'il', 'il', 'on', 'lui', 'elle'],
                    ['haut', 'haut', 'bas'],
                    ['train'],
                    ['non'],
                    ['par'],
                    ['seconde'],
                    ['tard'],
                    ['s‚Äô', 's‚Äô', "s'", "s'", "s'"],
                    ['filles', 'jeunes'],
                    ['Agent'],
                    ['l√©gal'],
                    ['social'],
                    ['Rayons', 'rayon'],
                    ['vides'],
                    ['al√©atoires'],
                    ['point'],
                    ['ou'],
                    ['fruit'],
                    ['l√©gume'],
                    ['plein'],
                    ['centre'],
                    ['ville'],
                    ['ferm√©', 'ferm√©', 'bloqu√©', 'bloquant'],
                    ['portes', 'portes'],
                    ['nous', 'nous', 'nous', 'nous'],
                    ['all√©s'],
                    ['excusaient'],
                    ['vigiles'],
                    ['sans'],
                    ['partir'],
                    ['10min', '40min'],
                    ['mal', 'mal', 'mal', 'mal'],
                    ['Apres'],
                    ['sorti'],
                    ['poli', 'poli'],
                    ['se', 'se', 'se'],
                    ['ticket'],
                    ['choqu√©'],
                    ['vigils', 'vigils'],
                    ['d√©sagr√©ables'],
                    ['sous'],
                    ['compte'],
                    ['ils', 'ils', 'ils'],
                    ['atteint'],
                    ['sommets']]
        self.assertEqual(expected, output)
